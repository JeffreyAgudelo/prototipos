<!DOCTYPE html>
<html lang="es">

<head>
     <title>proto 2</title>

     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">

     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.3.0/dist/sweetalert2.all.min.js"></script>

     <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js"></script>
     <script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>

     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">

     <meta property="og:site_name" content="proto 2">
     <meta property="og:title" content="proto 2">
     <meta property="og:description" content="proto 2">
     <meta property="og:image" content="https://i.ibb.co/3vg4KNb/softyo-001.png">
     <link rel="icon" type="image/png" href="https://i.ibb.co/3vg4KNb/softyo-001.png">
</head>

<body>
     <style>
          * {
               transition: all 0.25s;
          }

          body {
               margin: 0;
               padding: 0;
          }

          .container>div {
               margin: 10px;
               text-align: center;
          }

          .container {
               display: flex;
               justify-content: center;
               align-items: center;
               flex-wrap: wrap;
          }
     </style>




     <script>
          let mobilenet;
          let classifier;
          let video;
          let label = 'test';
          let rightButton;
          let leftButton;
          let trainButton;
          let i = 0

          function modelReady() {
               console.log('Model is ready!!!');
          }

          function videoReady() {
               console.log('Video is ready!!!');
          }

          function whileTraining(loss) {
               if (loss == null) {
                    console.log('Training Complete');
                    label = "Training Complete"
                    classifier.classify(gotResults);
               } else {
                    label = "Loss: " + loss
                    console.log(loss);
               }
          }

          function gotResults(error, result) {
               if (error) {
                    console.error(error);
               } else {
                    label = result[0].label;
                    classifier.classify(gotResults);
               }
          }

          function setup() {
               createCanvas(320, 270);
               video = createCapture(VIDEO);
               video.hide();
               background(0);
               mobilenet = ml5.featureExtractor('MobileNet', modelReady);
               classifier = mobilenet.classification(video, videoReady);

               rightButton = createButton('right');
               
               rightButton.mousePressed(function () {
                    i++
                    label = "right add " + i
                    classifier.addImage('right');
               });

               leftButton = createButton('left');
               leftButton.mousePressed(function () {
                    i++
                    label = "left add " + i
                    classifier.addImage('left');
               });

               trainButton = createButton('train');
               trainButton.mousePressed(function () {
                    label = "Training"
                    classifier.train(whileTraining);
               });
          }

          function draw() {
               background(0);
               push()
               translate(320, 0)
               scale(-1, 1)
               image(video, 0, 0, 320, 240);
               pop()
               fill(255);
               textSize(16);
               text(label, 10, height - 10);
          }
     </script>


</body>

</html>